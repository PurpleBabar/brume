---
region: {{ env('AWS_REGION') }}

stack:
  stack_name: &stack_name
    {{ '-'.join([env('PROJECT'), env('ENVIRONMENT'), env('CLASSIFIER')]) }}

  template_body: Main.cform
  capabilities: [ CAPABILITY_IAM ]
  on_failure: DELETE

  parameters:
    Project: '{{ env('PROJECT') }}'
    Environment: '{{ env('ENVIRONMENT') }}'
    Classifier:  '{{ env('CLASSIFIER') }}'
    GitCommit:  '{{ git_commit }}'
    GitBranch:  '{{ git_branch }}'

  tags:
    Project: '{{ env('PROJECT') }}'
    Environment: '{{ env('ENVIRONMENT') }}'
    Classifier:  '{{ env('CLASSIFIER') }}'

templates:
  s3_bucket: my_bucket
  s3_prefix: *stack_name
